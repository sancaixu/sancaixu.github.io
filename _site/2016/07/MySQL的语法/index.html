<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>MySQL的使用</title>
  <meta name="description" content="一、创建数据库">
  <meta name="author" content="Wei Wang">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="MySQL的使用">
  <meta name="twitter:description" content="一、创建数据库">
  
  <meta property="og:type" content="article">
  <meta property="og:title" content="MySQL的使用">
  <meta property="og:description" content="一、创建数据库">
  
  <link rel="icon" type="image/png" href="/assets/images/favicon.png" />
  <link href="/assets/images/favicon.png" rel="shortcut icon" type="image/png">
  
  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="https://www.xusancai.com/2016/07/MySQL%E7%9A%84%E8%AF%AD%E6%B3%95/">
  <link rel="alternate" type="application/rss+xml" title="好歹是个程序猿" href="https://www.xusancai.com/feed.xml">
  
  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />
  
</head>


  <body>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/assets/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/#blog" title="前往 好歹是个程序猿 的主页" class="blog-button"><img src="/assets/images/avatar.jpg" width="80" alt="好歹是个程序猿 logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for 好歹是个程序猿" class="blog-button">好歹是个程序猿</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">让人迷茫的原因只有一个——那就是本该拼搏的年纪，却想得太多，做得太少！</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">Hello，大家好，我叫徐三才，iOS工程师一枚。</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        
        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="Visit blog" class="blog-button">Blog</a></li>
                
                  <li class="navigation__item"><a href="https://github.com/sancaixu" target="_blank" title="My Projects">Projects</a></li>
                
              </ul>
            </nav>
          </div>
          
          <div><nav class="cover-navigation navigation--social">
  <ul class="navigation">

  

  
  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/sancaixu" title="@sancaixu 的 Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>
  
  
  

  

  <!-- RSS -->
  <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

  
  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:sancaixu@163.com" title="Contact me">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>
  

  </ul>
</nav>
</div>
        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-red"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2016-07-31 08:11:24 +0800" itemprop="datePublished" class="post-meta__date date">2016-07-31</time> &#8226; <span class="post-meta__tags tags">MySQL</span>
    </div>
    <h1 class="post-title">MySQL的使用</h1>
  </header>

  <section class="post">
    <h4 id="section">一、创建数据库</h4>

<p>1、使用<code class="highlighter-rouge">SHOW DATABASE</code>查看数据库</p>

<div class="highlighter-rouge"><pre class="highlight"><code>//查看数据库
SHOW DATABASE;
</code></pre>
</div>

<p>1、我们用 <code class="highlighter-rouge">CREATE DATABASE   数据库名;</code> 来完成创建数据库的工作，如果加上<code class="highlighter-rouge">IF NOT EXISTS</code>表示如果数据库不存在则创建数据库否则不创建。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>//创建了一个samp_db的数据库
CREATE DATABASE samp_db;
//如果数据库存在
CREATE DATABASE IF NOT EXISTS samp_db;
</code></pre>
</div>

<p>2、 这个新创建的数据库并不是当前的数据库，这可从执行下面的查询看出。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT DATABASE();
</code></pre>
</div>

<p>3、为了使samp_db称为当前数据库，使用<code class="highlighter-rouge">USE 数据库的名字;</code>语句即可</p>

<div class="highlighter-rouge"><pre class="highlight"><code>USE samp_db;
SELECT DATABASE();
</code></pre>
</div>
<p>4、查询数据库版本</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT VERSION(); 
</code></pre>
</div>

<p>5、查询当前用户</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT USER();
</code></pre>
</div>

<p>6、也可以何在一起查询</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT NOW(),USER(),VERSION();
</code></pre>
</div>

<h4 id="section-1">二、数据类型</h4>

<h5 id="section-2">1.数值类型</h5>

<p>MySQL支持所有标准SQL数值数据类型。</p>

<p>这些类型包括严格数值数据类型(INTEGER、SMALLINT、DECIMAL和NUMERIC)，以及近似数值数据类
型(FLOAT、REAL和DOUBLE PRECISION)。</p>

<ul>
  <li><code class="highlighter-rouge">TINYINT</code> 小整数值 1字节</li>
  <li><code class="highlighter-rouge">SMALLINT</code> 大整数值 2字节</li>
  <li><code class="highlighter-rouge">MEDIUMINT</code> 大整数值 3字节</li>
  <li><code class="highlighter-rouge">INT或INTEGER</code> 大整数值 4字节</li>
  <li><code class="highlighter-rouge">BIGINT</code> 极大整数值</li>
  <li><code class="highlighter-rouge">FLOAT</code> 单精度 浮点数值 4字节</li>
  <li><code class="highlighter-rouge">DOUBLE</code> 双精度 浮点数值 8 字节</li>
  <li><code class="highlighter-rouge">DECIMAL或者DEC</code> 小数值 对DECIMAL(M,D) ，如果M&gt;D，为M+2否则为D+2</li>
</ul>

<h5 id="section-3">2.日期和时间类型</h5>

<p>表示时间值的日期和时间类型为DATETIME、DATE、TIMESTAMP、TIME和YEAR。</p>

<p>每个时间类型有一个有效值范围和一个”零”值，当指定不合法的MySQL不能表示的值时使用”零”值。</p>

<p>TIMESTAMP类型有专有的自动更新特性。</p>

<ul>
  <li><code class="highlighter-rouge">DATE</code> 日期值，格式: <code class="highlighter-rouge">YYYY-MM-DD</code> 3字节</li>
  <li><code class="highlighter-rouge">TIME</code> 日期值或持续时间，格式: <code class="highlighter-rouge">HH:MM:SS</code> 3字节</li>
  <li><code class="highlighter-rouge">YEAR</code> 年份值，格式: <code class="highlighter-rouge">YYYY</code> 1字节</li>
  <li><code class="highlighter-rouge">DATETIME</code> 混合日期和时间值，格式: <code class="highlighter-rouge">YYYY-MM-DD HH:mm:SS </code> 8字节</li>
  <li><code class="highlighter-rouge">TIMESTAMP</code> 混合日期和时间值，时间戳 格式: <code class="highlighter-rouge">YYYYMMDD HHMMSS</code> 8字节</li>
</ul>

<h5 id="section-4">3.字符串类型</h5>

<p>字符串类型指CHAR、VARCHAR、BINARY、VARBINARY、BLOB、TEXT、ENUM和SET。</p>

<ul>
  <li><code class="highlighter-rouge">CHAR</code> 定长字符串，0-255字节</li>
  <li><code class="highlighter-rouge">VARCHAR</code> 变长字符串，0-65535字节</li>
  <li><code class="highlighter-rouge">TINYBLOB</code> 不超过255个字符的二进制字符串 ，0-255字节</li>
  <li><code class="highlighter-rouge">TINYTEXT</code> 短文本字符串，0-255字节</li>
  <li><code class="highlighter-rouge">BLOB</code> 二进制形式的长文本数据，0-65535字节</li>
  <li><code class="highlighter-rouge">TEXT</code> 长文本数据，0-65535字节</li>
  <li><code class="highlighter-rouge">MEDIUMBLOB</code> 二进制形式的中等长度文本数据，0-16777215字节</li>
  <li><code class="highlighter-rouge">MEDIUMTEXT</code> 中等长度文本数据，0-16777215字节</li>
  <li><code class="highlighter-rouge">LONGBLOB</code> 二进制形式的极大文本数据，0-4294967295字节</li>
  <li><code class="highlighter-rouge">LONGTEXT</code> 极大文本数据，0-4294967295字节</li>
</ul>

<h4 id="section-5">三、创建表</h4>

<p>1、我们用 <code class="highlighter-rouge">CREATE TABLE table_name(column_name column_type);</code> 语句来玩成创建表的工作</p>

<div class="highlighter-rouge"><pre class="highlight"><code>//创建一个president表
CREATE TABLE president (
	last_name VARCHAR(15) NOT NULL,
	first_name VARCHAR(15) NOT NULL,
	suffix VARCHAR(5) NULL,
	city VARCHAR(20) NOT NULL,
	state VARCHAR(2) NOT NULL,
	birth DATE NOT NULL,
	death DATE NULL
);
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>//创建一个学生表
CREATE TABLE IF NOT EXISTS student  (
	name VARCHAR(20) NOT NULL,
	sex ENUM('F','M') NOT NULL,
	student_id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY
)ENGINE=INNODB DEFAULT CHARSET=UTF8;	
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>//创建一个event表
CREATE TABLE IF NOT EXISTS event (
   	 date DATE NOT NULL,
 	 type ENUM('T', 'Q') NOT NULL,
	 event_id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY
)  ENGINE=INNODB DEFAULT CHARSET=UTF8;
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>//创建一个score表
CREATE TABLE IF NOT EXISTS score (
	 student_id INT UNSIGNED NOT NULL,
	 event_id INT UNSIGNED NOT NULL,
	 score INT NOT NULL,
	 PRIMARY KEY (event_id , student_id)
)  ENGINE=INNODB DEFAULT CHARSET=UTF8;
</code></pre>
</div>

<p>实例解析:</p>

<ul>
  <li><code class="highlighter-rouge">NULL</code> 表示此列的值不一定要输入，<code class="highlighter-rouge">NOT NULL</code> 表示此列的值必须填入。</li>
  <li><code class="highlighter-rouge">AUTO_INCREMENT</code> 是MySQL中的一个特殊属性。</li>
  <li><code class="highlighter-rouge">ENGINE</code> 是表的引擎类型，缺省值为<code class="highlighter-rouge">INNODB</code></li>
  <li><code class="highlighter-rouge">CHARSET</code> 设置MySQL的字符集</li>
  <li><code class="highlighter-rouge">IF NOT EXISTS</code> 判读表是否存在</li>
  <li><code class="highlighter-rouge">PRIMARY KEY</code> 用于定义列为主键。 您可以使用多列来定义主键，列间以逗号分隔。</li>
  <li><code class="highlighter-rouge">ENUM</code> 类型非常有用。我们可以用 CHAR(1) 来代替它,但是 ENUM 更明确规定了列可 以取什么值。如果对包括一个 ENUM 列的表发布一条 <code class="highlighter-rouge">DESCRIBE tbl_name</code> 语句,MySQL 将 确切地显示可取的值有哪些。此列还可以定义为 <code class="highlighter-rouge">ENUM (‘female’,‘male’)。</code></li>
</ul>

<p>2、使用 <code class="highlighter-rouge">DESCRIBE president;</code> 查看是否如我们所期望的创建了表，在我们忘记了表中的类名，需要知道列的类型、了解列有多宽等的时候很有用。 DESCRIBE可以省写为<code class="highlighter-rouge">DESC</code> 。<code class="highlighter-rouge">DESCRIBE tbl_name;</code>等同与<code class="highlighter-rouge">SHOW COLUMNS FROM tbl_name</code>。</p>

<p>3、使用 <code class="highlighter-rouge">SHOW TABLES</code> 用来查看创建的表名。</p>

<p>4、使用 <code class="highlighter-rouge">SHOW DATABASES</code> 用来查看数据库名。</p>

<h4 id="section-6">四、增加新记录</h4>

<p>1、我们用 <code class="highlighter-rouge">INSERT INTO tbl_name VALUES(value1, value2,···);</code> 语句来玩成创建表的工作。</p>

<ul>
  <li>
    <p>可指定所有列的值</p>

    <p><code class="highlighter-rouge">INSERT INTO tbl_name VALUES(value1,value2,·····);</code></p>
  </li>
</ul>

<p>例如:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>INSERT INTO student values('Kyle','M',null);
INSERT INTO event values('1999-9-3','Q',null);
</code></pre>
</div>
<p>解析：VALUES表示包含中每列的值，并且得按表中列额存放次序给我。如果不能肯定，可以使用<code class="highlighter-rouge">DESCRIBE tbl_name</code>来查看</p>

<ul>
  <li>
    <p>允许通过指定多个值得列表，利用单个的 <code class="highlighter-rouge">INSERT</code>语句将几行插入一个表中</p>

    <p><code class="highlighter-rouge">INSERT INTO tbl_name VALUES(...),(...),...</code></p>
  </li>
</ul>

<p>例如:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>INSERT INTO student VALUES('Abby','F',NULL),("Kyll",'M',NULL);
</code></pre>
</div>

<p>这比多个INSERT语句的键入工作要少，而且服务器执行的效率也更高。</p>

<ul>
  <li>
    <p>也可以给出要赋值的列，然后在列出值，</p>

    <p><code class="highlighter-rouge">INSERT INTO tbl_name (col_name1,col_name,...) VALUES(value1,value2,...);</code></p>
  </li>
</ul>

<p>例如:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>INSERT INTO student (name,sex) VALUES('Stein','M');
//自MySQL3.22.5版本以来,这种形式的INSERT也允许多个值
INSERT INTO student (name,sex) VALUES('Abby','F'),('Kyle','M');
</code></pre>
</div>

<p>在列中未给出名称的列都讲赋予缺省值。</p>

<ul>
  <li>
    <p>自MySQL 3.22.10以来，可以用 <code class="highlighter-rouge">col_name=value</code>的形式给出列和值。</p>

    <p><code class="highlighter-rouge">INSERT INTO tbl_name SET col_name1=value1,col_name2=value2,····;</code></p>
  </li>
</ul>

<p>例如:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>INSERT INTO student name='kyll',sex='F';
</code></pre>
</div>

<p>在SET子语句中未命名的行都赋予一个缺省值。使用这种形式的<code class="highlighter-rouge">INSERT</code>语句不能插入多行。</p>

<h4 id="section-7">五、查看信息</h4>

<p>我们用<code class="highlighter-rouge">SELECT</code>语句检索和显示表中的信息。<code class="highlighter-rouge">SELECT</code>语句有几个子句，可以更具需要用来检索感兴趣的信息。每个子句都可以简单、可复杂。<code class="highlighter-rouge">SELECT</code> 语句一般的形式为：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>	SELECT 要选择的东西 
	FROM 一个或者多个表 
	WHERE 数据必须满足的条件
</code></pre>
</div>

<h5 id="section-8">1、 不指定条件检索</h5>

<ul>
  <li><code class="highlighter-rouge">FROM</code>字句指定了要从其中检索数据的表时，<code class="highlighter-rouge">SELECT</code>语句的最“普通”的是检索所有内容。用<code class="highlighter-rouge">*</code>来表示所有列。</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT * FROM student;
</code></pre>
</div>

<ul>
  <li>可以明确的命名希望得到一列或多列，如果只选择学生名，发布下列语句：</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT name FROM student;
</code></pre>
</div>

<ul>
  <li>如果不止名字这一列，可用逗号分隔他们，可以按任意次序给出列:</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT name, sex FROM student;
</code></pre>
</div>

<h5 id="section-9">2、 指定检索条件</h5>

<p>可以用<code class="highlighter-rouge">WHERE</code>子句给<code class="highlighter-rouge">SELECT</code>语句增加限制条件。</p>

<ul>
  <li>可查找数值:</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT * FROM score WHERE score &gt; 95;
</code></pre>
</div>

<ul>
  <li>也可以查找串值。（一般串的比较不区分大小写）</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT last_name, first_name FROM president WHERE last_name='ROOSEVELT';
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT last_name, first_name FROM president WHERE last_name='ROOSEVELT';
</code></pre>
</div>

<ul>
  <li>也可以查找日期值</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT last_name,first_name,birth FROM president WHERE birth &lt; '1750-1-1';
</code></pre>
</div>

<ul>
  <li>也可以搜索组合值</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT last_name, first_name, birth, state FROM president WHERE birth &lt; '1750-1-1' AND (state='VA' OR state='MA');
</code></pre>
</div>

<p>WHERE子句中的表达式可使用算术运算符、比较运算符和逻辑运算符</p>

<p>算术运算符：<code class="highlighter-rouge">+</code>、<code class="highlighter-rouge">-</code>、<code class="highlighter-rouge">*</code>、<code class="highlighter-rouge">/</code>；
比较运算符：<code class="highlighter-rouge">&lt;</code>、<code class="highlighter-rouge">&lt;=</code>、<code class="highlighter-rouge">=</code>、<code class="highlighter-rouge">!=或者&lt;&gt;</code>、<code class="highlighter-rouge">&gt;=</code>、<code class="highlighter-rouge">&gt;</code>；
逻辑运算符：<code class="highlighter-rouge">AND</code>、<code class="highlighter-rouge">OR</code>、<code class="highlighter-rouge">NOT</code>。</p>

<ul>
  <li>关于 <code class="highlighter-rouge">NULL</code>值</li>
</ul>

<p><code class="highlighter-rouge">NULL</code>值是特殊的，因为他代表的是“无值”。不可能以评估两个已知值的相同方式来讲他与已知值进行评估。不能讲NULL与他自身比较，因为不可能知道比较两个未知值得结果</p>

<p>为了进行NULL值得搜索必须采用特殊的语法不能用 <code class="highlighter-rouge">=</code> 或者 <code class="highlighter-rouge">!=</code>来测试等于 <code class="highlighter-rouge">NULL</code> 或者不等于<code class="highlighter-rouge">NULL</code>，取而代之的是使用<code class="highlighter-rouge">IS NULL</code> 或者 <code class="highlighter-rouge">IS NOT NULL</code> 来测试。</p>

<p>例如，我们将健在总统的死亡日期表示为 <code class="highlighter-rouge">NULL</code>，那么可按如下语句查找健在的总统</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT last_name, first_name FROM president WHERE death IS NULL;
</code></pre>
</div>

<p>为了找到具有后缀部分的姓名，可利用<code class="highlighter-rouge">IS NOT NULL</code>：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT last_name, frist_name, suffix FROM president WHERE suffix IS NOT NULL;
</code></pre>
</div>

<p>注意：在MySQL 3.23 及以后的版本具有一个特殊的比较运算符<strong><code class="highlighter-rouge">&lt;=&gt;</code></strong> 即使是NULL与NULL的比较他也是可行的，可以将前面的两个查询重写为</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT last_name, first_name FROM president WHERE death &lt;=&gt; NULL;
SELECT last_name, frist_name, suffix FROM president WHERE NOT (suffix &lt;=&gt; NULL);
</code></pre>
</div>

<h5 id="section-10">3. 对查询结果进行排序</h5>

<p>当我们对一个表发布一条<code class="highlighter-rouge">SELECT * FROM tbl_name;</code> 查询，检索出的行与这些行被插入的顺序是相同的。在这种情况下是有规律的，但是当表进行了行的删除和插入的时候，就会发现服务器返回表的行次序被改变了。（删除记录在表中留下了未使用的“空位”，MySQL在以后插入新记录时将会试图对其填补。）为了进行排序，可使用<code class="highlighter-rouge">ORDER BY</code> 子句：</p>

<ul>
  <li>对学生的名字进行排序</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT name FROM president ORDER BY name;
</code></pre>
</div>

<ul>
  <li>在<code class="highlighter-rouge">ORDER BY</code> 子句中，可在列名之后利用<code class="highlighter-rouge">ASC</code>或者<code class="highlighter-rouge">DESC</code> 关键字指定排序是按升序还是降序。</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>//按降序排列，在不指定ASC和DESC的情况下，缺省值为升序。
SELECT name FROM president ORDER BY name DESC;
</code></pre>
</div>

<p>注：如果对可能包含<code class="highlighter-rouge">NULL</code>值得列进行排序时，如果是升序排序，<code class="highlighter-rouge">NULL</code>值出现在最前面，如果是降序，<code class="highlighter-rouge">NULL</code> 值出现在最后。</p>

<p>查询结果可在多个列上进行排序，每个列的升序或降序可以互相独立。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT last_name, first_name, state FROM president ORDER BY state DESC, last_name ASC;
</code></pre>
</div>

<h5 id="section-11">5.对查询的结果进行限制</h5>
<p>如果一个查询可以返回许多行，但如果只想看其中的几行，可以使用<code class="highlighter-rouge">LIMIT</code> 子句，特别是与ORDER BY 子句结合是更是如此。</p>

<ul>
  <li>下面的查询选择了5位出生日期最早的总统</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT last_name, first_name,birth FROM president ORDER BY birth LIMIT 5;
</code></pre>
</div>

<ul>
  <li>当然也可以使用 <code class="highlighter-rouge">LIMIT num1,num2</code> 子句进行查询，<strong>num1</strong>代表的是你希望看到的第一个记录的位置，<strong>num2</strong>代表的是你希望看到的记录个数。例如：</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT last_name, first_name,birth FROM president ORDER BY birth LIMIT 10,5;
</code></pre>
</div>

<ul>
  <li>也可有使用<code class="highlighter-rouge">RAND()</code>与<code class="highlighter-rouge">LIMIT</code>结合，从president表中随机抽取一个记录：</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT last_name, first_name FROM president ORDER BY RAND() LIMIT 1;
</code></pre>
</div>

<h5 id="section-12">6.计算并命名输出的值</h5>

<ul>
  <li>表达式也可以引用表列，例如：</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT CONCAT(first_name," ",last_name),CONCAT(city,", ",state) FROM president;
</code></pre>
</div>

<ul>
  <li>给列名别名</li>
</ul>

<p>上面这个查询把名和姓连接起来，中间间隔一个空格，将总统的名形成一个单一的字符串，而且将出生城市和州连接在一起，中间隔一个逗号，形成出生地。这样表达式可能会很长，我们可以利用 <code class="highlighter-rouge">AS name</code> 结构来重新命名标题，或者叫别名。例如：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT CONCAT(first_name," ",last_name) AS Name,CONCAT(city,", ",state) As BirthPlace FROM president;
</code></pre>
</div>

<p>如果别名包含空格需用双引号括起来。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT CONCAT(first_name," ",last_name) AS "President Name",CONCAT(city,", ",state) As "Place of Birth" FROM president;
</code></pre>
</div>

<h5 id="section-13">7.使用日期</h5>

<ul>
  <li>根据精确的日期查找</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT * FROM event WHERE date = "1999-10-01";
</code></pre>
</div>

<ul>
  <li>根据日期的范围查找</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT last_name,first_name,death FROM president WHERE death &gt;= "1970-01-01" AND death &lt; "1980-01-01";
</code></pre>
</div>

<ul>
  <li>也可以使用<code class="highlighter-rouge">YAER()</code>、<code class="highlighter-rouge">MONTH()</code>、<code class="highlighter-rouge">DAYOFMONTH()</code>、这样的函数去检索日期的成分。</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>//查找月份为3的日期值，找出3月份出生的总统
SELECT last_name,frist_name,birth FROM president WHERE MONTH(birth) = 3;
</code></pre>
</div>

<p>此查询也可以按月的名称写出：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT last_name, first_name, birth FROM president WHERE MONTHNAME(birth) = "March";
</code></pre>
</div>

<p>为了更详细也可以详细到天，可组合测试 <code class="highlighter-rouge">MONTH()</code>和<code class="highlighter-rouge">DAYOFMONTH()</code></p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT last_name, first_name, birth FROM president WHERE MONTH(birth) = 3 AND DAYOFMONTH(birth) = 29;
</code></pre>
</div>

<ul>
  <li>也可以用<code class="highlighter-rouge">CURRENT_DATE</code>来进行比较</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>//查询有没有总统是今天生日的。
SELECT last_name, first_name, birth FROM president WHERE MONTH(birth) = MONTH(CURRENT_DATE) AND DAYOFMONTH(birth) = DAYOFMONTH(CURRENT_DATE);
</code></pre>
</div>

<ul>
  <li>求哪位总统活的最长</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT last_name, first_name, birth, death, FLOOR((TO_DAYS(death) - TO_DAYS(birth))/365) AS age FROM president WHERE death IS NOT NULL ORDER BY age DESC LIMIT 5;
</code></pre>
</div>
<p>此查询中<code class="highlighter-rouge">TO_DAYS()</code>将出生日期和逝世日期转换为天数，求出差，然后除以365，得出大概年龄。<code class="highlighter-rouge">FLOOR()</code>函数 用于截掉年龄的小数部分，得到一个整数。</p>

<ul>
  <li>自MySQL 3.22以来，可使用<code class="highlighter-rouge">DATE_ADD()</code>或者<code class="highlighter-rouge">DATE_SUB()</code>从一个日期计算另一个日期。这些函数取一个日期及时间间隔并产生一个新的日期值。例如：</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT DATE_ADD("1970-1-1", INTERVAL 10 YEAR);
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT DATE_SUB("1970-1-1", INTERVAL 10 YEAR);
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>//查询一个70年代逝世的总统
SELECT last_name, first_name, death FROM president WHERE death &gt;= DATE_ADD("1970-1-1", INTERVAL 10 YEAR);
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>//会员更新的查询
SELECT last_name,first_name, expiration FROM member WHERE expiration &lt; DATE_ADD(CURRENT_DATE, INTERVAL 60 DAY);
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>//确定不久要来检测，但还没有来诊所的病人
SELECT last_name,first_name, last_visit FROM patient WHWRE last_visit &lt; DATE_SUB(CURRENT_DATE, INTERVAL 6 MONTH);
</code></pre>
</div>

<h5 id="like-">8.模式匹配(LIKE 子句)</h5>

<p><code class="highlighter-rouge">LIKE</code>运算符是是用来匹配通配符指定模式的文本值，这里通常有两个通配符与<code class="highlighter-rouge">LIKE</code>一起使用</p>

<ul>
  <li>
    <p>百分号（%）代表零个、一个或多个数字或字符。</p>
  </li>
  <li>
    <p>下划线（_）代表一个单一的数字或字符，这些符号可以被组合使用</p>
  </li>
</ul>

<p>语法基本如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>//1.匹配以“W” 或者“w”开头的名字的名字
SELECT name FROM student WHERE name LIKE "W%";
//2.匹配任意位置包含“W” 或者“w”的名字
SELECT name FROM student WHERE name LIKE "%W%";
//3.查找第二为“H” 或者“h”的名字
SELECT name FROM student WHERE name LIKE "_h%";
//4.查找以"W"开头,第三位为“H” 或者“h”的名字，且长度至少为三个字符的任意值
SELECT name FROM student WHERE name LIKE "W_%_%";
//5.查找以”r“结尾的任意值
SELECT name FROM student WHERE name LIKE "%r";
</code></pre>
</div>

<h5 id="section-14">9.生成汇总</h5>

<p>汇总的一种简单的形式是确定在一组值中的那些值是唯一值。利用DISTINCT 关键字来删除结果中的重复行。例如：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>//查找出总统出生的各州
SELECT DISTINCT stats FROM president ORDER BY state;
</code></pre>
</div>

<p>其他汇总形式涉及计数，可利用 <code class="highlighter-rouge">COUTN()</code>函数。如果使用<code class="highlighter-rouge">COUNT(*)</code>，他讲给出查询所选择的行数。如果一个查询无WHERE子句，<code class="highlighter-rouge">COUTN(*)</code>将给出表中的行数。例如：
查询班上有多少学生</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT COUNT(*) FROM student;
</code></pre>
</div>

<p>如果查询有<code class="highlighter-rouge">WHERE</code>子句，<code class="highlighter-rouge">COUNT(*)</code>将给出此子句选择多少行。下面的查询给出目前为止对班级进行了多少次测试：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT COUNT(*) FROM event WHERE type = 'Q';
</code></pre>
</div>

<p><code class="highlighter-rouge">COUNT(*)</code>对选中的行进行计数。而<code class="highlighter-rouge">COUNT(col_name)</code>只对非NULL值进行计数。下面的查询说明了这些差异：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT COUNT(*), COUNT(suffix),COUNT(death) FROM president;
</code></pre>
</div>

<p>也可以将<code class="highlighter-rouge">DISTINCT</code>和<code class="highlighter-rouge">COUNT()</code>组合对选择结果进行统计：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT COUNT(DISTINCT state) FROM president;
</code></pre>
</div>

<p>也可以和<code class="highlighter-rouge">WHERE</code>子句一起使用，例如查找有多少男孩和女孩
~~~
SELECT COUNT(<em>) FROM student WHERE sex = ‘f’;
SELECT COUNT(</em>) FROM student WHERE sex = ‘m’;
~~~</p>

<p>上面的子句比较繁琐，MySQL可以利用单个查询对一个列中的不同值进行计数。因此，针对上面的查询，可以简化为：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT sex, COUNT(*) FROM student GROUP BY sex;
</code></pre>
</div>

<p>对<code class="highlighter-rouge">GROUP BY</code>查询出的结果进行排序</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT state, COUNT(*) AS count FROM president GROUP BY state ORDER BY count DESC;
</code></pre>
</div>

<p><code class="highlighter-rouge">COUNT</code>可与<code class="highlighter-rouge">ORDER BY</code>和<code class="highlighter-rouge">LIMIT</code>组合来查找<code class="highlighter-rouge">student</code>表中4个学生最多的区。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT state , COUNT(*) AS count FROM student GROUP BY state ORDER BY count DESC LIMIT 4;
</code></pre>
</div>
<p>如果不想用<code class="highlighter-rouge">LIMIT</code>子句来限制查询输出，也可以使用<code class="highlighter-rouge">HAVING</code>子句。例如查询，一个有两个学生以上的街道：
~~~
SELECT state , COUNT(*) AS count FROM president GROUP BY state HAVING count &gt; 1 ODER BY count DESC;
~~~</p>

<p>出来<code class="highlighter-rouge">COUNT()</code>外还有许多的汇总函数。如<code class="highlighter-rouge">MIN()</code>	、<code class="highlighter-rouge">MAX()</code>、<code class="highlighter-rouge">SUM()</code>、<code class="highlighter-rouge">AVG</code>函数在确定列的最大、最小、总数和平均值时非常有用。例如：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT event_id ,
		MIN(score) AS minimum,
		MAX(score) AS maximum,
		MAX(score) - MIN(score)+1 AS range,
		SUM(score) AS total,
		AVG(score) AS average,
		COUNT(score) AS count,
		FROM score
		GROUP BY event_id;

</code></pre>
</div>

<h5 id="section-15">10.从多表中检索信息</h5>

<ul>
  <li>对特定日期的学分进行选择查询：</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT student_id ,date,score, type FROM event, score
WHERE date = '1999-09-23' 
AND event.event_id = score.event_id;
</code></pre>
</div>

<p>注：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>* FROM 子句给出了不止一个表名，因为我们要检索的数据不止来自一个表：

* WHERE 子句说明event 和 score表是由每个表中的event_id值得匹配连接起来的。
</code></pre>
</div>

<p>一般连接中我们应该对每个列都进行限定以便清晰地表示出每个列属于哪个表。查询如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT score.student_id,event_date,score.score,event.type 
FROM event ,score
WHERE event.date = "1999-09-23"
AND event.even_id = score.event_id
</code></pre>
</div>

<ul>
  <li>汇总学生的缺勤情况，查询如下：</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT student.student_id, student.name, 
COUNT(absence.date) as absences
FROM student ,absence
WHERE student.student_id = absence.student_id
GROUP BY sudent.student_id
</code></pre>
</div>

<ul>
  <li><code class="highlighter-rouge">LEFT JOIN</code>的使用，<code class="highlighter-rouge">LEFT JOIN</code>不涉及上述<code class="highlighter-rouge">WHERE</code>子句的学生，得到的是每个学生的输出结果，即使那些在absence表中未给出的学生也都包括在输出中。查询如下：</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>SELECT s.student_id,s.name,
COUNT(absence.date) as absences
FROM student AS s LEFT JOIN absence
ON student.student_id = absence.student_id
GROUP BY student.student_id;
</code></pre>
</div>

<p><strong>注：此查询使用了表的别名（ s ）</strong></p>

<h4 id="section-16">六、删除信息</h4>

<h4 id="section-17">七、改变表结构</h4>


  </section>
</article>

<section class="read-more">
   
   
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">更早的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/2016/07/MySQL%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" title="link to MySQL的数据类型">MySQL的数据类型</a></h2>
       <p class="excerpt">一、列类型参考MySQL有4种数据类型，分别为数值型，串类型，日期和时间类型，NULL值。1.1数值类型MySQL支持所有标准SQL数值数据类型。对于整数类型，如果指定了AUTO_INCREMENT属性，则必须为PRIMARY KEY或者UNIQUE索引。如果将NULL插入 AUTO_INCREMENT 列将会插入一个大于该列当中当前的最大值。如果指定了UNSIGNED属性，则相应的整数不允许取负值。如果指定了ZEROFILE属性，则用前导零填充数值类型的值已达到列显示的宽度。1.1.1 ...&hellip;</p>
       <div class="post-list__meta"><time datetime="2016-07-31 08:11:24 +0800" class="post-list__meta--date date">2016-07-31</time> &#8226; <span class="post-list__meta--tags tags">MySQL</span><a class="btn-border-small" href=/2016/07/MySQL%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/>继续阅读</a></div>
   </div>
   
</section>

<section class="post-comments">
  
    <div id="disqus_thread"></div>
    <script>
    
    var disqus_config = function () {
        this.page.url = "https://www.xusancai.com/2016/07/MySQL%E7%9A%84%E8%AF%AD%E6%B3%95/";
        this.page.identifier = "/2016/07/MySQL%E7%9A%84%E8%AF%AD%E6%B3%95/";
    };

    var disqus_shortname = 'sancaixu';
    
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>要查看<a href="http://disqus.com/?ref_noscript"> Disqus </a>评论，请启用 JavaScript</noscript>
    
  
  
  
  
</section>


            <section class="footer">
    <footer>
        <span class="footer__copyright">由 <a href="https://jekyllrb.com">Jekyll</a> 于 2016-08-06 生成,感谢 <a href="https://github.com/onevcat/vno-jekyll">onevcat</a>提供的主题</span>
        <span class="footer__copyright">本站由 <a href="https://www.xusancai.com">@xusancai</a> 创建，采用 <a href="https://github.com/onevcat/vno-jekyll">Vno - Jekyll</a> 作为主题，您可以在 GitHub 找到<a href="https://github.com/onevcat/OneV-s-Den">本站源码</a> - &copy; 2016</span>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript" src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript" src="/js/main.js"></script>


<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-81174961-1', 'xusancai.com');
    ga('send', 'pageview');
</script>


    
  </body>

</html>
